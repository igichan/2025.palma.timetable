import streamlit as st
import pandas as pd

# ë°˜ë³„ ì•ŒíŒŒë²³ ê³¼ëª© ë§¤ì¹­ ì…ë ¥ ë° ì‹œê°„í‘œ ìƒì„±
class_alphabets = {
    "3-1": sorted(["C", "I", "B", "F", "D", "E", "J", "G", "H"]),
    "3-2": sorted(["I", "A", "B", "F", "D", "E", "J", "G", "H"]),
    "3-3": sorted(["C", "I", "A", "B", "F", "E", "J", "G", "H"]),
    "3-4": sorted(["C", "I", "A", "B", "F", "D", "E", "J", "G", "H"]),
    "3-5": sorted(["C", "I", "A", "B", "F", "D", "E", "J", "G", "H"]),
    "3-6": sorted(["C", "I", "A", "B", "F", "D", "E", "J", "G", "H"]),
    "3-7": sorted(["C", "I", "A", "B", "F", "D", "E", "J", "G", "H"]),
    "3-8": sorted(["C", "I", "A", "B", "F", "D", "E", "J", "G", "H"])
}

# ë°˜ë³„ ì‹œê°„í‘œ ë°ì´í„°
timetable_template = {
    "3-1": {"ì›”": ["ììœ¨", "C", "I", "ì§„ë¡œ", "B", "F", "D"],
    "í™”": ["F", "E", "ìŒì•…", "D", "í™”ì‘", "ì˜2", "ìŠ¤ìƒ"],
    "ìˆ˜": ["ì˜1", "I", "H", "í™”ì‘", "ì°½ì²´", "ì°½ì²´"],
    "ëª©": ["D", "E", "B", "J", "C", "ìŠ¤ìƒ", "G"],
    "ê¸ˆ": ["H", "B", "C", "ê³µê°•", "G", "ìŒì•…", "í™”ì‘"]},
    "3-2": {"ì›”": ["ììœ¨", "ì§„ë¡œ", "I", "A", "B", "F", "D"],
    "í™”": ["F", "E", "ìŠ¤ìƒ", "D", "ê³µê°•", "í™”ì‘", "A"],
    "ìˆ˜": ["í™”ì‘", "I", "H", "ì˜1", "ì°½ì²´", "ì°½ì²´"],
    "ëª©": ["D", "E", "B", "J", "ìŒì•…", "A", "G"],
    "ê¸ˆ": ["H", "B", "ìŒì•…", "ìŠ¤ìƒ", "G", "í™”ì‘", "ì˜2"]},
    "3-3": {"ì›”": ["ììœ¨", "C", "I", "A", "B", "F", "ê³µê°•"],
    "í™”": ["F", "E", "ìˆ˜ê³¼íƒ", "ì˜1", "ìŒì•…", "ìŠ¤ìƒ", "A"],
    "ìˆ˜": ["ì§„ë¡œ", "I", "H", "ìˆ˜ê³¼íƒ", "ì°½ì²´", "ì°½ì²´"],
    "ëª©": ["ì˜2", "E", "B", "J", "C", "A", "G"],
    "ê¸ˆ": ["H", "B", "C", "ìŒì•…", "G", "ìˆ˜ê³¼íƒ", "ìŠ¤ìƒ"]},
    "3-4": {"ì›”": ["ììœ¨", "C", "I", "A", "B", "F", "D"],
    "í™”": ["F", "E", "ì˜2", "D", "ìŠ¤ìƒ", "ìŒì•…", "A"],
    "ìˆ˜": ["ì§„ë¡œ", "I", "H", "ìŒì•…", "ì°½ì²´", "ì°½ì²´"],
    "ëª©": ["D", "E", "B", "J", "C", "A", "G"],
    "ê¸ˆ": ["H", "B", "C", "ê³µê°•", "G", "ìŠ¤ìƒ", "ì˜1"]},
    "3-5": {"ì›”": ["ììœ¨", "C", "I", "A", "B", "F", "D"],
    "í™”": ["F", "E", "ê³µê°•", "D", "ìŠ¤ìƒ", "ì§„ë¡œ", "A"],
    "ìˆ˜": ["ì˜2", "I", "H", "ìŒì•…", "ì°½ì²´", "ì°½ì²´"],
    "ëª©": ["D", "E", "B", "J", "C", "A", "G"],
    "ê¸ˆ": ["H", "B", "C", "ìŠ¤ìƒ", "G", "ì˜1", "ìŒì•…"]},
    "3-6": {"ì›”": ["ììœ¨", "C", "I", "A", "B", "F", "D"],
    "í™”": ["F", "E", "ìŒì•…", "D", "ì˜2", "ì˜1", "A"],
    "ìˆ˜": ["ìŠ¤ìƒ", "I", "H", "ê³µê°•", "ì°½ì²´", "ì°½ì²´"],
    "ëª©": ["D", "E", "B", "J", "C", "A", "G"],
    "ê¸ˆ": ["H", "B", "C", "ì§„ë¡œ", "G", "ìŒì•…", "ìŠ¤ìƒ"]},
    "3-7": {"ì›”": ["ììœ¨", "C", "I", "A", "B", "F", "D"],
    "í™”": ["F", "E", "ìŠ¤ìƒ", "D", "ê³µê°•", "ìŒì•…", "A"],
    "ìˆ˜": ["ìŒì•…", "I", "H", "ì˜2", "ì°½ì²´", "ì°½ì²´"],
    "ëª©": ["D", "E", "B", "J", "C", "A", "G"],
    "ê¸ˆ": ["H", "B", "C", "ì˜1", "G", "ìŠ¤ìƒ", "ì§„ë¡œ"]},
    "3-8": {"ì›”": ["ììœ¨", "C", "I", "A", "B", "F", "D"],
    "í™”": ["F", "E", "ì˜1", "D", "ìŒì•…", "ìŠ¤ìƒ", "A"],
    "ìˆ˜": ["ì§„ë¡œ", "I", "H", "ìŠ¤ìƒ", "ì°½ì²´", "ì°½ì²´"],
    "ëª©": ["D", "E", "B", "J", "C", "A", "G"],
    "ê¸ˆ": ["H", "B", "C", "ìŒì•…", "G", "ì˜2", "ê³µê°•"]}
}

# Streamlit UI ìƒì„±
st.title("ğŸ“… í•™êµ ì‹œê°„í‘œ ìƒì„±ê¸°")

# ë°˜ ì„ íƒ
class_number = st.selectbox("ë°˜ì„ ì„ íƒí•˜ì„¸ìš”", list(timetable_template.keys()))

# ì‚¬ìš©ì ì´ë¦„ ì…ë ¥
user_name = st.text_input("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”")

if user_name:
    # ê³¼ëª© ì…ë ¥
    subject_mapping = {}
    st.write(f"{class_number} ë°˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì•ŒíŒŒë²³: {', '.join(class_alphabets[class_number])}")
    for alpha in class_alphabets[class_number]:
        subject_mapping[alpha] = st.text_input(f"{user_name} ë‹˜ì˜ {alpha} ê³¼ëª©: ", key=alpha)

    # ì‹œê°„í‘œë¥¼ ê³¼ëª©ëª…ìœ¼ë¡œ ë³€í™˜
    def convert_timetable(timetable, mapping):
        return {day: [mapping.get(sub, sub) for sub in subjects] for day, subjects in timetable.items()}

    # ì„ íƒí•œ ë°˜ì˜ ì‹œê°„í‘œ ìƒì„±
    final_timetable = convert_timetable(timetable_template[class_number], subject_mapping)

    # ì‹œê°„í‘œ í˜•ì‹ì„ ìš”ì¼-êµì‹œì—ì„œ êµì‹œ-ìš”ì¼ë¡œ ë³€ê²½
    df = pd.DataFrame(final_timetable).transpose()
    df.columns = ["1êµì‹œ", "2êµì‹œ", "3êµì‹œ", "4êµì‹œ", "5êµì‹œ", "6êµì‹œ", "7êµì‹œ"]
    df.index.name = "ìš”ì¼"
    
    # ì‹œê°„í‘œ í‘œì‹œ
    st.write(f"### ğŸ« {class_number}ë°˜ {user_name}ì˜ ì‹œê°„í‘œ")
    st.dataframe(df)
